<div class="session-container">
  <header>
    <h2>Sess√£o: {{ sessionCode }}</h2>
  </header>

  <div class="content-container">
    <div class="music-queue-container">
      <section class="now-playing">
        <h3>üéµ Tocando Agora</h3>

        @if (current) {
        <div class="current">
          <div class="title">{{ current.titulo }}</div>
          <div class="by">Adicionado por: {{ current.adicionadoPor }}</div>
        </div>
        } @else {
        <ng-template #noCurrent>
          <div class="none">Nenhuma m√∫sica tocando.</div>
        </ng-template>
        }
      </section>

      <section class="queue">
        <h4>Fila</h4>
        <ol>
          @for (song of queue; track song.id) {
          <li>
            <div class="song-item" [class.mine]="isAddedByMe(song)">
              <div class="meta">
                <div class="title">{{ song.titulo }}</div>
                <div class="by">{{ song.adicionadoPor }}</div>
              </div>
              <div class="actions">
                @if (isAddedByMe(song)) {
                <button class="remove" (click)="removeSong(song.id)">üóëÔ∏è</button>
                }
              </div>
            </div>
          </li>
          }
        </ol>
      </section>
    </div>

    <div class="content-sidebar">
      <section class="connected-users-container">
        <h4>Usu√°rios Conectados</h4>
        @if (connectedUsers().length !== 0) {
        <ul>
          @for (user of connectedUsers(); track user.id) {
          <li>{{ user.name }}</li>
          }
        </ul>
        } @else {
        <div class="none">Nenhum usu√°rio conectado.</div>
        }
      </section>

      <section class="add-song">
        <h4>Adicionar √† fila</h4>

        <div class="add-row">
          <input type="text" [(ngModel)]="urlToAdd" placeholder="Nome da m√∫sica" />
          <button (click)="addSong()">+</button>
        </div>

        @if (addError) {
        <div class="error">{{ addError }}</div>
        }
      </section>
    </div>
  </div>
</div>
